extends ../index

block navlist
  ul.nav.navbar-nav
    li.active
      a(href='#') 课程表
    li
      a(href='member') 会员

append css
  link(rel="stylesheet",href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.10.1/bootstrap-table.min.css")

append pagjs
  script(src="//cdn.bootcss.com/moment.js/2.13.0/moment-with-locales.min.js")
  script(src='/components/bootbox.js/bootbox.js')
  script(src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.10.1/bootstrap-table.min.js")
  script(src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.10.1/locale/bootstrap-table-zh-CN.min.js")
  //script(src='https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.13.0/moment.min.js')
  //script(src='/components/requirejs/require.js',data-main="/js/main")
  script(src='/js/main.js')

block page
  div.container(style={'padding-top': '50px'})
    div.row(style={'margin-top': '15px'})
      div.col-sm-4
        button#previous_week.btn.btn-primary.btn-sm 上一周
        button#current_week.btn.btn-primary.btn-sm 本周
        button#next_week.btn.btn-primary.btn-sm 下一周
      div.col-sm-2.pull-right
        div#chooseRoom.btn-group(style='float:right')
          button.btn.btn-default.btn-sm.dropdown-toggle(type='button',data-toggle='dropdown') <默认> 
            span.caret
          ul.dropdown-menu
            li.divider(role='separator')
            li
              a(href='#') <创建教室>
        span(style='float:right;line-height:30px') 教室: 
    table#cls_table.table.table-bordered.table-hover(style={'margin-top': '15px'})
        thead#schedule_header
          tr
            th 时间
            th 星期一
            th 星期二
            th 星期三
            th 星期四
            th 星期五
            th 星期六
            th 星期日
        tbody
          tr#morning
            td 上午
            each val in [1, 2, 3, 4, 5, 6, 7]
              td
                p
                div.btn-group.btn-group-xs.pull-right
                  button#add_cls.btn.btn-default(data-toggle='modal',data-target='#cls_dlg') +
          tr#afternoon
            td 下午
            each val in [1, 2, 3, 4, 5, 6, 7]
              td
                p
                div.btn-group.btn-group-xs.pull-right
                  button#add_cls.btn.btn-default(data-toggle='modal',data-target='#cls_dlg') +
          tr#evening
            td 晚上
            each val in [1, 2, 3, 4, 5, 6, 7]
              td
                p
                div.btn-group.btn-group-xs.pull-right
                  button#add_cls.btn.btn-default(data-toggle='modal',data-target='#cls_dlg') +
  
  div#cls_dlg.modal.fade(tabindex='-1',role='dialog',aria-labelledby='myModalLabel',data-backdrop='static')
    div.modal-dialog(role="document")
      div.modal-content
        div.modal-header
          button.close(type="button",data-dismiss="modal",aria-label="Close")
            span(aria-hidden="true") &times
          h4#myModalLabel.modal-title 添加课程
        div.modal-body
          form.form-horizontal
            div.form-group
              label.control-label.col-sm-2(for='cls_name') 课程名称:
              div.col-sm-10
                input#cls_name.form-control(type='text',placeholder='课程描述')
            div.form-group
              label.control-label.col-sm-2(for='cls_type') 课程类型:
              div.btn-group.col-sm-10(data-toggle='buttons')
                label.btn.btn-primary.active
                  input#radio1(type='radio',name='cls_type',value='story')
                  |故事会
                label.btn.btn-primary
                  input#radio2(type='radio',name='cls_type',value='event')
                  |主题活动
            div.form-group
              label.control-label.col-sm-2 时间:
              div.col-sm-10
                p#cls_date.form-control-static
            div.form-group
              label.control-label.col-sm-2(for='cls_capacity') 最大人数:
              div.col-sm-2
                input#cls_capacity.form-control(type='number',name='cls_capacity',min='1')
        div.modal-footer
          button.btn.btn-default(type="button",data-dismiss="modal") 取消
          button#create_cls.btn.btn-success(type="button") 添加

  div#view_dlg.modal.fade(tabindex='-1',data-backdrop='static')
    div.modal-dialog
      div.modal-content
        div.modal-header
          button.close(type="button",data-dismiss="modal",aria-label="Close")
            span(aria-hidden="true") &times
          h4#myModalLabel.modal-title 查看课程
        div.modal-body
          form.form-horizontal
            div.form-group(style='margin-bottom:7px')
              label.control-label.col-sm-2(for='cls_name') 课程名称:
              div.col-sm-10
                input#cls_name.form-control(type='text',placeholder='课程描述')
            div.form-group(style='margin-bottom:7px')
              label.control-label.col-sm-2 课程类型:
              div.col-sm-10
                p#cls_type.form-control-static
            div.form-group(style='margin-bottom:7px')
              label.control-label.col-sm-2 时间:
              div.col-sm-10
                p#cls_date.form-control-static
            div.form-group
              label.control-label.col-sm-2(for='cls_capacity') 最大人数:
              div.col-sm-2
                input#cls_capacity.form-control(type='number',name='cls_capacity',min='1')
          table#member_table(data-toggle="table",data-checkbox-header='false',data-striped='true',data-sort-name='bookDate',data-unique-id="member")
            thead
              tr
                //th(data-field='_id',data-visible='false') ID
                th(data-field='bookDate',data-formatter='dateFormatter',data-sortable='true') 预约时间
                th(data-field='userName',data-sortable='true') 宝宝姓名
                th(data-field='contact') 联系方式
                th(data-field='quantity') 预约人数
                th(data-title='取消',data-align='center',data-formatter='deleteFormatter',data-events='handleDeleteBook')
        script(type='text/javascript').
            function dateFormatter(value) {
                if (value) {
                    return moment(value).format('ll');
                } else {
                    return undefined;
                }
            };
            function deleteFormatter(value) {
                return [
                    '<a class="remove text-danger" href="javascript:void(0)" title="取消">',
                    '<i class="glyphicon glyphicon-remove"></i>',
                    '</a>'
                ].join('');
            };
        div.modal-footer
          button.btn.btn-default(type="button",data-dismiss="modal") 取消
          button#modify_cls.btn.btn-success(type="button") 修改